# DWH_HSE

## Как запустить
Чтобы запустить нужно склонировать репозиторий, запустить docker, зайти в папку с файлами и с помощью команды sh docker-init.sh запустить скрипт. Далее зайти в DataGrip/Dbeaver и создать два подключения - мастер и реплику. Для мастера порт 5432, для реплики 5433

## Что сделано
* Был написан файл init.sql, в котором реализован DDL, а также написан скрипт для расчет GMV и создан view для него
* Был написан файл docker-compose.yml, в котором описаны контейнеры для инстансов posgresql - мастера и реплики
* Настроен автоматическая репликация с мастер бд на реплику
* При запуске поднимается master инстанс posgresql. Далее делается бэкап в папку data-slave, откуда забирает данные реплика. В итоге поднимается мастер бд и реплика с таблицами внутри

